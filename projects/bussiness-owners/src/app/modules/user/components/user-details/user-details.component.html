<div class="popup_edit h-full">
  <h2 class="title">Edit User</h2>

  <div class="card_edit">
    <div class="information">
      <div class="user_photo">
        <img
          [src]="getProfilePic()"
          onerror="this.src='assets/images/users/editdefault.png'"
          alt=""
        />
      </div>
      <div class="user_name">
        <p>{{ userName }}</p>
      </div>
      <div class="user_mail">
        <p>{{ userEmail }}</p>
      </div>
    </div>
    <div class="admin_edit">
      <form
        [formGroup]="editUserForm"
        (ngSubmit)="onSubmit()"
        *ngIf="lookupsService.lookupsLoaded"
      >
        <lib-form-group>
          <lib-label [appControl]="editUserForm.controls['license']">
            license
          </lib-label>
          <lib-select
            formControlName="license"
            [options]="licenses"
            optionValue="id"
            optionLabel="name"
            [selectedValue]="selectedLicense"
          >
          </lib-select>
          <lib-field-validations
            [appControl]="editUserForm.controls['companyId']"
          >
          </lib-field-validations>
        </lib-form-group>

        <lib-form-group>
          <lib-label [appControl]="editUserForm.controls['companyId']">
            Company
          </lib-label>
          <lib-select
            formControlName="companyId"
            [options]="companies"
            optionValue="id"
            optionLabel="name"
            [selectedValue]="selectedCompany"
            (valueChanged)="onCompanyChange($event)"
          >
          </lib-select>
          <lib-field-validations
            [appControl]="editUserForm.controls['companyId']"
          >
          </lib-field-validations>
        </lib-form-group>

        <lib-form-group>
          <lib-label [appControl]="editUserForm.controls['branchIds']">
            Branches
          </lib-label>
          <lib-multi-select
            formControlName="branchIds"
            optionValue="id"
            optionLabel="name"
            [selectedValue]="selectedBranches"
          >
          </lib-multi-select>
          <lib-field-validations
            [appControl]="editUserForm.controls['branchIds']"
          >
          </lib-field-validations>
        </lib-form-group>

        <div *ngFor="let subdomainName of subdomains">
          <lib-form-group>
            <label> Domain Space </label>
            <div class="view">
              {{ subdomainName }}
            </div>
          </lib-form-group>
        </div>

        <div
          class="actions flex align-items-center justify-content-center mt-12"
        >
          <button class="save" type="submit">save</button>
          <button class="cancel" type="button" (click)="onCancel()">
            cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
