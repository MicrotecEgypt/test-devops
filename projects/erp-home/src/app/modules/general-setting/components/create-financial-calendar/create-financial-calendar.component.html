<lib-page-content>
  <lib-bread-crumb></lib-bread-crumb>

  <div class="chart_add_page">
    <form [formGroup]="formGroup">
      <div class="grid">
        <div class="md:col-10 grid">
          <div class="md:col-6">
            <lib-form-group>
              <lib-label [appControl]="formGroup.controls['year']">
                {{ 'financialCalendar.selectYear' | translate }}
              </lib-label>
              <lib-select
                formControlName="year"
                [options]="yearsList"
                [selectedValue]="formGroup.controls['year'].value"
                optionLabel="name"
                optionValue="name"
              >
              </lib-select>
            </lib-form-group>
          </div>
          <!--  -->

          <div class="md:col-6">
            <lib-form-group>
              <lib-label [appControl]="formGroup.controls['code']">
                {{ 'financialCalendar.code' | translate }}
              </lib-label>
              <lib-text-input [readOnly]="true" type="text" formControlName="code" />
            </lib-form-group>
          </div>
          <!--  -->
          <div class="md:col-3">
            <lib-label [appControl]="formGroup.controls['fromDate']">
              {{ 'financialCalendar.fromDate' | translate }}
            </lib-label>
            <lib-calendar
              formControlName="fromDate"
              [maxDate]="maxDatefrom"
              [disabled]="disablrFromDateFlag"
            ></lib-calendar>

            <lib-field-validations [appControl]="formGroup.controls['fromDate']">
            </lib-field-validations>
          </div>
          <!--  -->
          <div class="md:col-3">
            <lib-label [appControl]="formGroup.controls['toDate']">
              {{ 'financialCalendar.toDate' | translate }}
            </lib-label>
            <lib-calendar
              formControlName="toDate"
              [defaultDate]="defaultDateTo"
              [minDate]="minDateTo"
            ></lib-calendar>
            <lib-field-validations [appControl]="formGroup.controls['toDate']">
            </lib-field-validations>
          </div>

          <!--  -->
          <div class="md:col-6">
            <lib-form-group>
              <lib-label [appControl]="formGroup.controls['name']">
                {{ 'financialCalendar.name' | translate }}
              </lib-label>
              <lib-text-input type="text" formControlName="name" />
              <lib-field-validations [appControl]="formGroup.controls['name']">
              </lib-field-validations>
            </lib-form-group>
          </div>
        </div>
        <div
          class="md:col-2 grid align-items-end"
          (click)="onGenerate()"
          [class.none]="showOpenBtn"
        >
          <div class="flex gap-1 gernerateCont">
            <i class="pi pi-clock clockIcon"></i>
            <p class="m-0 generateBtn">{{ 'financialCalendar.generate' | translate }}</p>
          </div>
        </div>
        <div
          class="md:col-2 grid align-items-end"
          (click)="onOpenPeriod()"
          [class.none]="!showOpenBtn || opened"
        >
          <div class="flex gap-1 gernerateCont">
            <i class="pi pi-clock clockIcon"></i>
            <p class="m-0 generateBtn">{{ 'financialCalendar.open' | translate }}</p>
          </div>
        </div>
      </div>
    </form>
  </div>
  <!--  -->
  <div class="flex justify-content-end mt-5" *ngIf="!showOpenBtn">
    <lib-button
      pRipple
      className="addToList"
      label="{{ 'financialCalendar.Save' | translate }}"
      (onClick)="onSave()"
      [disabled]="!tableData?.length || !formGroup.valid"
    >
    </lib-button>
  </div>
  <!--  -->
  <div class="flex justify-content-end mt-5" *ngIf="showOpenBtn">
    <lib-button
      pRipple
      className="addToList"
      label="{{ 'financialCalendar.Save' | translate }}"
      (onClick)="onOpen()"
      [disabled]="!tableData?.length"
    >
    </lib-button>
  </div>
  <!--  -->
  {{ tableData.length }}
  <div class="user_pages" *ngIf="tableData.length > 0">
    <lib-data-table
      [items]="tableData"
      className="p-datatable-gridlines"
      [tableConfigs]="{
        allowPagination: true,
        allowServerPagination: false,
        dataKey: 'id',
        pageSize: 10,
        columns: [
       
           {
             name: 'month',
             headerText: ('financialCalendar.month' | translate),
             isGlobalFilter: true,
             isSortable: true
           },
         
           {
             name: 'year',
             headerText: ('financialCalendar.year' | translate),
           },
           {
             name: 'periodStart',
             headerText: ('financialCalendar.periodStart' | translate),
           },
         
           {
             name: 'periodEnd',
             headerText: ('financialCalendar.periodend' | translate),
           },
         
           {
             name: 'status',
             headerText: ('financialCalendar.periodStatus' | translate),
             template : status
           },
          
         ]
      }"
    >
      <ng-template #status let-status>
        <div class="actions flex align-items-center gap-2">
          <lib-input-switch [disabled]="statusFlag" [(ngModel)]="status.status"></lib-input-switch>
        </div>
      </ng-template>
    </lib-data-table>
  </div>
</lib-page-content>
