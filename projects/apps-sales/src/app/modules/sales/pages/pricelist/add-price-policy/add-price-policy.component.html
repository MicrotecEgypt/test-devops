<lib-page-content>
    <div class="card_micro">
        <form [formGroup]="addForm">
        <lib-fildest header="">
            <div class="grid m-0">
                <div class="col-12 md:col-6">
                    <lib-form-group>
                        <lib-label [appControl]="addForm.controls['code']">
                            {{'pricePolicy.code'|translate}}
                        </lib-label>
                        <lib-text-input
                        [readOnly]="true"
                        formControlName="code"

                        ></lib-text-input>
                        <lib-field-validations [appControl]="addForm.controls['code']">

                        </lib-field-validations>
                    </lib-form-group> 
                </div>
                <div class="col-12 md:col-6">
                    <lib-form-group>
                        <lib-label [appControl]="addForm.controls['name']">
                            {{'pricePolicy.name'|translate}}
                        </lib-label>
                        <lib-text-input
                        formControlName="name"

                        ></lib-text-input>
                        <lib-field-validations [appControl]="addForm.controls['name']">

                        </lib-field-validations>
                    </lib-form-group> 
                </div>
              
            </div>
        </lib-fildest>
        <lib-fildest header="{{'pricePolicy.getPolicy'|translate}}">
            <div class="grid m-0">
                <div class="col-12 md:col-6">
                    <lib-form-group>
                        <lib-label [appControl]="addForm.controls['uploadPolicy']">
                            {{'pricePolicy.uploadPolicy'|translate}}
                        </lib-label>
                        <!-- <lib-text-input
                        formControlName="uploadPolicy"

                        ></lib-text-input> -->
                        <lib-text-input  type="file" (change)="onFileSelected($event)" iconUrl="pi pi-upload"  accept=".xlsx"></lib-text-input>
                        <lib-button-micro title="log" nameClass="save" (click)="onclick()">
                        </lib-button-micro>
                        <lib-field-validations [appControl]="addForm.controls['uploadPolicy']">

                        </lib-field-validations>
                    </lib-form-group> 
                </div>
                <div class="col-12 md:col-6">
                    <lib-form-group>
                        <lib-label [appControl]="addForm.controls['fromPolicy']">
                            {{'pricePolicy.fromPolicy'|translate}}
                        </lib-label>
                        <lib-text-input
                        formControlName="fromPolicy"

                        ></lib-text-input>
                        <lib-field-validations [appControl]="addForm.controls['fromPolicy']">

                        </lib-field-validations>
                    </lib-form-group> 
                </div>
              
            </div>
        </lib-fildest>
        <lib-fildest header="{{'pricePolicy.applyPolicy'|translate}}">
            <div class="grid m-0">
                <div class="col-12 md:col-6">
                    <lib-form-group>
                        <lib-label [appControl]="addForm.controls['item']">
                            {{'pricePolicy.item'|translate}}
                        </lib-label>
                        <lib-text-input
                        formControlName="item"

                        ></lib-text-input>
                        <lib-field-validations [appControl]="addForm.controls['item']">

                        </lib-field-validations>
                    </lib-form-group> 
                </div>
                <div class="col-12 md:col-6">
                    <lib-form-group>
                        <lib-label [appControl]="addForm.controls['itemCategory']">
                            {{'pricePolicy.itemCategory'|translate}}
                        </lib-label>
                        <!-- <lib-text-input
                        formControlName="itemCategory"

                        ></lib-text-input> -->
                        <lib-multi-select
                        formControlName="itemCategory"
                        >

                        </lib-multi-select>
                        <lib-field-validations [appControl]="addForm.controls['itemCategory']">

                        </lib-field-validations>
                    </lib-form-group> 
                </div>
                <div class="col-12 md:col-5">
                    <lib-form-group>
                        <lib-label [appControl]="addForm.controls['value']">
                            {{'pricePolicy.value'|translate}}
                        </lib-label>
                        <lib-text-input
                        formControlName="value"

                        ></lib-text-input>
                        <lib-field-validations [appControl]="addForm.controls['value']">

                        </lib-field-validations>
                    </lib-form-group> 
                </div>
                <div class="col-12 md:col-5">
                    <lib-form-group>
                        <lib-label [appControl]="addForm.controls['valueType']">
                            {{'pricePolicy.valueType'|translate}}
                        </lib-label>
                        <lib-text-input
                        formControlName="valueType"

                        ></lib-text-input>
                        <lib-field-validations [appControl]="addForm.controls['valueType']">

                        </lib-field-validations>
                    </lib-form-group> 
                </div>
                <div class="col-12 md:col-2 mt-5" >
                    <lib-form-group>
                      
                        <lib-select
                        placeholder="+ or -"
                        formControlName="valueSelect"
                        >

                        </lib-select>
                        <lib-field-validations [appControl]="addForm.controls['valueType']">

                        </lib-field-validations>
                    </lib-form-group> 
                </div>
              
            </div>
        </lib-fildest>
        <lib-fildest header="">
            <div class="grid m-0">
                <div class="col-12 md:col-4">
                    <div class="date">
                        <lib-form-group>
                        <div class=" test  ">
                            <p-checkbox 
                            formControlName="VAT" 
                            inputId="VAT"
                            value="{{'pricePolicy.VAT'|translate}}" 
                          ></p-checkbox>
                          <lib-label
                          class="margin_start"
                          for="VAT"
                          [appControl]="addForm.controls['VAT']">
                              {{'pricePolicy.VAT'|translate}}
                          </lib-label>
                        </div>
                         
                            <lib-field-validations [appControl]="addForm.controls['VAT']">
    
                            </lib-field-validations>
                        </lib-form-group> 
                        <lib-form-group>
                        <div class="tes">
                            <lib-input-switch
                            formControlName="applyDate"
                            (ngModelChange)="test()"
                            ></lib-input-switch>
                               <lib-label
                               class="margin_start"
                               for="applyDate"
                               [appControl]="addForm.controls['applyDate']">
                                   {{'pricePolicy.applyDate'|translate}}
                               </lib-label>
    
                        </div>
                            <lib-field-validations [appControl]="addForm.controls['applyDate']">
    
                            </lib-field-validations>
                        </lib-form-group> 

                    </div>
                </div>
                <div class="col-12 md:col-8">
                    <lib-form-group>
                        <lib-label [appControl]="addForm.controls['date']">
                            {{'pricePolicy.toDate'|translate}}
                        </lib-label>
                      
                        <lib-calendar
                        formControlName="date"
                        >

                        </lib-calendar>
                        <lib-field-validations [appControl]="addForm.controls['date']">

                        </lib-field-validations>
                    </lib-form-group> 
                </div>
            
              
            </div>
        </lib-fildest>
    </form>
    </div>
    <div class="entry_tableCont">
        <div class="card">
          <p-table
            [resizableColumns]="true"
            [value]="pricePolicyFormArray.controls"
            dataKey="id"
            styleClass="p-datatable-gridlines p-datatable-striped"
            [tableStyle]="{ 'min-width': '50rem' }"
          >
            <ng-template pTemplate="header">
              <tr>
                <th>{{ 'pricePolicy.code' | translate }}</th>
                <th>{{ 'pricePolicy.name' | translate }}</th>
                <th>{{ 'pricePolicy.UOM' | translate }}</th>
                <th>{{ 'pricePolicy.varient' | translate }}</th>
                <th>{{ 'pricePolicy.price' | translate }}</th>
                <th>{{ 'pricePolicy.VAT' | translate }}</th>
                <th>{{ 'pricePolicy.priceVAT' | translate }}</th>
                
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-pricePolicy let-rowIndex="rowIndex">
              <tr [formGroup]="pricePolicy">
                <td [pEditableColumn]="pricePolicy.code" pEditableColumnField="code">
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <div class="flex gap-2 align-items-center">
                        <lib-text-input
                          type="text"
                          formControlName="code"
                        >
                        </lib-text-input>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{ pricePolicy.get('code').value }}
                    </ng-template>
                  </p-cellEditor>
                  <lib-field-validations [appControl]="pricePolicy.controls['code']">
                  </lib-field-validations>
                </td>
                <td [pEditableColumn]="pricePolicy.name" pEditableColumnField="name">
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <div class="flex gap-2 align-items-center">
                        <lib-text-input
                          type="text"
                          formControlName="name"
                        >
                        </lib-text-input>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{ pricePolicy.get('name').value }}
                    </ng-template>
                  </p-cellEditor>
                  <lib-field-validations [appControl]="pricePolicy.controls['name']">
                  </lib-field-validations>
                </td>
                <td [pEditableColumn]="pricePolicy.uom" pEditableColumnField="uom">
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <div class="flex gap-2 align-items-center">
                        <lib-text-input
                          type="text"
                          formControlName="uom"
                        >
                        </lib-text-input>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{ pricePolicy.get('uom').value }}
                    </ng-template>
                  </p-cellEditor>
                  <lib-field-validations [appControl]="pricePolicy.controls['uom']">
                  </lib-field-validations>
                </td>
                <td [pEditableColumn]="pricePolicy.varient" pEditableColumnField="varient">
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <div class="flex gap-2 align-items-center">
                        <lib-text-input
                          type="text"
                          formControlName="varient"
                        >
                        </lib-text-input>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{ pricePolicy.get('varient').value }}
                    </ng-template>
                  </p-cellEditor>
                  <lib-field-validations [appControl]="pricePolicy.controls['varient']">
                  </lib-field-validations>
                </td>
                <td [pEditableColumn]="pricePolicy.price" pEditableColumnField="price">
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <div class="flex gap-2 align-items-center">
                        <lib-text-input
                          type="text"
                          formControlName="price"
                        >
                        </lib-text-input>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{ pricePolicy.get('price').value }}
                    </ng-template>
                  </p-cellEditor>
                  <lib-field-validations [appControl]="pricePolicy.controls['price']">
                  </lib-field-validations>
                </td>
             <td>
                <lib-input-switch 
                formControlName="VAT"
                [(ngModel)]="pricePolicy.get('VAT').value"
                >

                </lib-input-switch>
             </td>
               <td class="readOnly">
                {{ pricePolicy.get('priceVAT').value }}
               </td>
               
              </tr>
            </ng-template>
         
          </p-table>
          <div class="add_new">
            <div class="grid">
              <div class="md:col-3">
                <div class="grid">
                  <div class="md:col-6">
                    <lib-button-micro
                      nameClass="outline"
                      widthNumber="100%"
                      title="{{ 'add_new_line' | translate }}"
                      (click)="addNewRow()"
                    >
                    </lib-button-micro>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="btn_group">
        <div class="grid">
          <div class="md:col-3">
            <div class="grid">
              <div class="md:col-6">
                <lib-button-micro
                  title="{{ 'Cancel' | translate }}"
                  nameClass="cancel"
                  widthNumber="100%"
                >
                </lib-button-micro>
              </div>
              <div class="md:col-6">
                  <lib-button-micro
                    title="{{ 'Save' | translate }}"
                    nameClass="save"
                    widthNumber="100%"
                  >
                  </lib-button-micro>
               
              </div>
            </div>
          </div>
        </div>
      </div>
</lib-page-content>